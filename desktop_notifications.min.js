var desktopNotifications=function(){var i=window.Notification||navigator.mozNotification||window.webkitNotifications||!1,o="default",t=window.opera||navigator.userAgent.indexOf(" OPR/")>-1,n=window.chrome&&!t,e="undefined"!=typeof InstallTrigger,s=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,a=[],c=function(){return 0!=i},r=function(){if(this.isSupported()){if(window.Notification&&window.Notification.permissionLevel)return"granted"==(o=window.Notification.permissionLevel());if(window.Notification&&window.Notification.permission)return"granted"==(o=window.Notification.permission);if(navigator.mozNotification)return!0;if(window.webkitNotifications&&window.webkitNotifications.checkPermission)return"granted"==(o=0==window.webkitNotifications.checkPermission()?"granted":2==window.webkitNotifications.checkPermission()?"denied":"default")}},w=function(){return this.isSupported()&&!this.isPermited()&&"denied"==o},d=function(i){i=i||function(){},this.isSupported()&&!this.isPermited()&&(this.isDenied()?n?alert('You have blocked notifications.\nOpen "chrome://settings/contentExceptions#notifications" in a new tab and remove blocking.'):e?alert('You have blocked notifications.\nRight click on the page and click "View Page Info".\nIn the panel that opens, click the tab "Permissions".\nScroll down to "Show Notifications" and check "Use default" and close the panel.'):s?alert("You have blocked notifications.\nOpen Safari Menu > Preferences > Notifications tab, and remove blocking."):t&&alert('You have blocked notifications.\nOpen "browser://settings/contentExceptions#notifications" in a new tab and remove blocking.'):window.Notification&&window.Notification.requestPermission?window.Notification.requestPermission(i):window.webkitNotifications&&window.webkitNotifications.requestPermission?window.webkitNotifications.requestPermission(i):i(!1))},f=function(i,o,t,n){var e=!1;if(n=n||{},n.icon=n.icon||"",n.body=o,n.tag=t,n.timeout=n.timeout||1e4,n.onclose=n.onclose||function(){},-1==a.indexOf(n.tag)&&this.isSupported()&&this.isPermited()){if(a.push(n.tag),window.Notification?e=new window.Notification(i,n):navigator.mozNotification?(e=navigator.mozNotification.createNotification(i,o,n.icon),e.show()):window.webkitNotifications&&(e=window.webkitNotifications.createNotification(n.icon,i,o),e.show()),n.sound){var s=new Audio(n.sound);s.play()}setTimeout(function(){e.close(),a.splice(a.indexOf(n.tag),1),n.onclose(e)},n.timeout)}return e};return{isSupported:c,isPermited:r,isDenied:w,requestPermission:d,showNotification:f}}();